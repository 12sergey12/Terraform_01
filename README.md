# Домашнее задание к занятию «Введение в Terraform» Сергей Баранов

### Цели задания

1. Установить и настроить Terrafrom.
2. Научиться использовать готовый код.

------

### Чек-лист готовности к домашнему заданию

1. Скачайте и установите актуальную версию **Terraform** >=1.4.X . Приложите скриншот вывода команды ```terraform --version```.

![monitoring](https://github.com/12sergey12/Terraform_01/blob/main/images/7.1_1.1.png)

2. Скачайте на свой ПК этот git-репозиторий. Исходный код для выполнения задания расположен в директории **01/src**.
3. Убедитесь, что в вашей ОС установлен docker.
4. Зарегистрируйте аккаунт на сайте https://hub.docker.com/, выполните команду docker login и введите логин, пароль.

------

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. Репозиторий с ссылкой на зеркало для установки и настройки Terraform: [ссылка](https://github.com/netology-code/devops-materials).
2. Установка docker: [ссылка](https://docs.docker.com/engine/install/ubuntu/). 
------

### Задание 1

1. Перейдите в каталог [**src**](https://github.com/netology-code/ter-homeworks/tree/main/01/src). Скачайте все необходимые зависимости, использованные в проекте. 
2. Изучите файл **.gitignore**. В каком terraform-файле, согласно этому .gitignore, допустимо сохранить личную, секретную информацию?

допустимо сохранить личную, секретную информацию в файле personal.auto.tfvars

3. Выполните код проекта. Найдите  в state-файле секретное содержимое созданного ресурса **random_password**, пришлите в качестве ответа конкретный ключ и его значение.

"result": "G60JKNza4tZodPjb"

4. Раскомментируйте блок кода, примерно расположенный на строчках 29–42 файла **main.tf**.
Выполните команду ```terraform validate```. Объясните, в чём заключаются намеренно допущенные ошибки. Исправьте их.

Ошибка: отсутствует имя для ресурса. В ресурсе "docker_image" Все блоки ресурсов должны иметь 2 метки (тип, название).

Ошибка: неверное имя ресурса. В ресурсе "docker_container" "1nginx": Имя должно начинаться с буквы или символа подчеркивания и может содержать только буквы, цифры, символы подчеркивания и тире.

В ресурсе «docker_container» «nginx»:

  name = "example_${random_password.random_string_FAKE.resulT}" Управляемый ресурс "random_password" "random_string_FAKE" не был объявлен в корневом модуле.

5. Выполните код. В качестве ответа приложите вывод команды ```docker ps```.

![monitoring](https://github.com/12sergey12/Terraform_01/blob/main/images/7.1_5.png)

6. Замените имя docker-контейнера в блоке кода на ```hello_world```. Не перепутайте имя контейнера и имя образа. Мы всё ещё продолжаем использовать name = "nginx:latest". Выполните команду ```terraform apply -auto-approve```.
Объясните своими словами, в чём может быть опасность применения ключа  ```-auto-approve```. В качестве ответа дополнительно приложите вывод команды ```docker ps```.

Опасность применения ключа -auto-approve
 что никто не может изменить нашу инфраструктуру за пределами нашего рабочего процесса Terraform. Это сводит к минимуму риск непредсказуемых изменений и дрейфа конфигурации.-auto-approve  Пропускает интерактивное утверждение плана перед применением. Этот параметр игнорируется, когда мы передаем ранее сохраненный файл плана, потому что Terraform считает, что мы передаем файл плана как утверждение, и поэтому никогда не будет запрашивать в этом случае.

![monitoring](https://github.com/12sergey12/Terraform_01/blob/main/images/7.1_6.1.png)

8. Уничтожьте созданные ресурсы с помощью **terraform**. Убедитесь, что все ресурсы удалены. Приложите содержимое файла **terraform.tfstate**. 

![monitoring](https://github.com/12sergey12/Terraform_01/blob/main/images/7.1_7.png)

9. Объясните, почему при этом не был удалён docker-образ **nginx:latest**. Ответ подкрепите выдержкой из документации [**провайдера docker**](https://docs.comcloud.xyz/providers/kreuzwerker/docker/latest/docs).  

При использовании переключателя rm = true в файле main.tf, означает, что при создании контейнера docker Terraform не будет проверять этот контейнер после создания.

![monitoring](

------


## Дополнительное задание (со звёздочкой*)

**Настоятельно рекомендуем выполнять все задания со звёздочкой.** Они помогут глубже разобраться в материале.   
Задания со звёздочкой дополнительные, не обязательные к выполнению и никак не повлияют на получение вами зачёта по этому домашнему заданию. 

### Задание 2*

1. Изучите в документации provider [**Virtualbox**](https://docs.comcloud.xyz/providers/shekeriev/virtualbox/latest/docs) от 
shekeriev.
2. Создайте с его помощью любую виртуальную машину. Чтобы не использовать VPN, советуем выбрать любой образ с расположением в GitHub из [**списка**](https://www.vagrantbox.es/).

В качестве ответа приложите plan для создаваемого ресурса и скриншот созданного в VB ресурса. 

------

### Правила приёма работы

Домашняя работа оформляется в отдельном GitHub-репозитории в файле README.md.   
Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

### Критерии оценки

Зачёт ставится, если:

* выполнены все задания,
* ответы даны в развёрнутой форме,
* приложены соответствующие скриншоты и файлы проекта,
* в выполненных заданиях нет противоречий и нарушения логики.

На доработку работу отправят, если:

* задание выполнено частично или не выполнено вообще,
* в логике выполнения заданий есть противоречия и существенные недостатки. 
